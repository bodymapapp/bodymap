{"ast":null,"code":"// src/pages/ClientIntake.js\n// Custom URL page - loads therapist, shows BodyMap, saves to Supabase\nimport React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{db}from'../lib/supabase';import Demo from'./Demo';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ClientIntake(){const{customUrl}=useParams();const navigate=useNavigate();const[therapist,setTherapist]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{loadTherapist();},[customUrl]);const loadTherapist=async()=>{try{setLoading(true);const data=await db.getTherapistByUrl(customUrl);setTherapist(data);setError(null);}catch(err){console.error('Error loading therapist:',err);setError('Therapist not found. Please check the URL.');}finally{setLoading(false);}};const handleSubmit=async intakeData=>{try{// Step 1: Create or get client\nconst client=await db.upsertClient(therapist.id,{name:intakeData.clientName,phone:intakeData.clientPhone,email:intakeData.clientEmail||null});// Step 2: Create session with all intake data\nawait db.createSession({therapist_id:therapist.id,client_id:client.id,front_focus:intakeData.frontFocus||[],front_avoid:intakeData.frontAvoid||[],back_focus:intakeData.backFocus||[],back_avoid:intakeData.backAvoid||[],pressure:intakeData.pressure||3,goal:intakeData.goal||'relax',table_temp:intakeData.tableTemp||'warm',room_temp:intakeData.roomTemp||'comfortable',music:intakeData.music||'soft',lighting:intakeData.lighting||'dim',conversation:intakeData.conversation||'quiet',draping:intakeData.draping||'standard',oil_pref:intakeData.oilPref||'none',med_flag:intakeData.medFlag||'none',completed:false});// Step 3: Redirect to thank you page\nnavigate('/thank-you',{state:{therapistName:therapist.business_name,clientName:intakeData.clientName}});}catch(err){console.error('Error saving intake:',err);alert('There was an error saving your preferences. Please try again.');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',fontFamily:'system-ui, sans-serif',background:'#F0EAD9'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\uD83C\\uDF3F\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px',color:'#6B7280'},children:\"Loading...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh',fontFamily:'system-ui, sans-serif',background:'#F0EAD9',padding:'24px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',background:'white',padding:'40px',borderRadius:'12px',maxWidth:'400px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'48px',marginBottom:'16px'},children:\"\\u274C\"}),/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'24px',marginBottom:'16px',color:'#1F2937'},children:\"Therapist Not Found\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:'16px',color:'#6B7280',marginBottom:'24px'},children:error}),/*#__PURE__*/_jsx(\"a\",{href:\"https://mybodymap.app\",style:{display:'inline-block',background:'#6B9E80',color:'white',padding:'12px 24px',borderRadius:'8px',textDecoration:'none',fontWeight:'600'},children:\"Go to BodyMap Home\"})]})});}return/*#__PURE__*/_jsx(Demo,{therapistName:therapist.business_name,onSubmit:handleSubmit});}","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","db","Demo","jsx","_jsx","jsxs","_jsxs","ClientIntake","customUrl","navigate","therapist","setTherapist","loading","setLoading","error","setError","loadTherapist","data","getTherapistByUrl","err","console","handleSubmit","intakeData","client","upsertClient","id","name","clientName","phone","clientPhone","email","clientEmail","createSession","therapist_id","client_id","front_focus","frontFocus","front_avoid","frontAvoid","back_focus","backFocus","back_avoid","backAvoid","pressure","goal","table_temp","tableTemp","room_temp","roomTemp","music","lighting","conversation","draping","oil_pref","oilPref","med_flag","medFlag","completed","state","therapistName","business_name","alert","style","display","justifyContent","alignItems","height","fontFamily","background","children","textAlign","fontSize","marginBottom","color","padding","borderRadius","maxWidth","href","textDecoration","fontWeight","onSubmit"],"sources":["/Users/harshkumar/Library/CloudStorage/OneDrive-IBM/X HK HK Psnl/00 A Personal/01 Ideas/BodyMap/Product/bodymap-final/src/pages/ClientIntake.js"],"sourcesContent":["// src/pages/ClientIntake.js\n// Custom URL page - loads therapist, shows BodyMap, saves to Supabase\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { db } from '../lib/supabase';\nimport Demo from './Demo';\n\nexport default function ClientIntake() {\n  const { customUrl } = useParams();\n  const navigate = useNavigate();\n  const [therapist, setTherapist] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    loadTherapist();\n  }, [customUrl]);\n\n  const loadTherapist = async () => {\n    try {\n      setLoading(true);\n      const data = await db.getTherapistByUrl(customUrl);\n      setTherapist(data);\n      setError(null);\n    } catch (err) {\n      console.error('Error loading therapist:', err);\n      setError('Therapist not found. Please check the URL.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (intakeData) => {\n    try {\n      // Step 1: Create or get client\n      const client = await db.upsertClient(therapist.id, {\n        name: intakeData.clientName,\n        phone: intakeData.clientPhone,\n        email: intakeData.clientEmail || null\n      });\n\n      // Step 2: Create session with all intake data\n      await db.createSession({\n        therapist_id: therapist.id,\n        client_id: client.id,\n        front_focus: intakeData.frontFocus || [],\n        front_avoid: intakeData.frontAvoid || [],\n        back_focus: intakeData.backFocus || [],\n        back_avoid: intakeData.backAvoid || [],\n        pressure: intakeData.pressure || 3,\n        goal: intakeData.goal || 'relax',\n        table_temp: intakeData.tableTemp || 'warm',\n        room_temp: intakeData.roomTemp || 'comfortable',\n        music: intakeData.music || 'soft',\n        lighting: intakeData.lighting || 'dim',\n        conversation: intakeData.conversation || 'quiet',\n        draping: intakeData.draping || 'standard',\n        oil_pref: intakeData.oilPref || 'none',\n        med_flag: intakeData.medFlag || 'none',\n        completed: false\n      });\n\n      // Step 3: Redirect to thank you page\n      navigate('/thank-you', { \n        state: { \n          therapistName: therapist.business_name,\n          clientName: intakeData.clientName \n        } \n      });\n    } catch (err) {\n      console.error('Error saving intake:', err);\n      alert('There was an error saving your preferences. Please try again.');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '100vh',\n        fontFamily: 'system-ui, sans-serif',\n        background: '#F0EAD9'\n      }}>\n        <div style={{ textAlign: 'center' }}>\n          <div style={{ fontSize: '48px', marginBottom: '16px' }}>üåø</div>\n          <div style={{ fontSize: '18px', color: '#6B7280' }}>Loading...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '100vh',\n        fontFamily: 'system-ui, sans-serif',\n        background: '#F0EAD9',\n        padding: '24px'\n      }}>\n        <div style={{ \n          textAlign: 'center',\n          background: 'white',\n          padding: '40px',\n          borderRadius: '12px',\n          maxWidth: '400px'\n        }}>\n          <div style={{ fontSize: '48px', marginBottom: '16px' }}>‚ùå</div>\n          <h2 style={{ fontSize: '24px', marginBottom: '16px', color: '#1F2937' }}>\n            Therapist Not Found\n          </h2>\n          <p style={{ fontSize: '16px', color: '#6B7280', marginBottom: '24px' }}>\n            {error}\n          </p>\n          <a \n            href=\"https://mybodymap.app\"\n            style={{\n              display: 'inline-block',\n              background: '#6B9E80',\n              color: 'white',\n              padding: '12px 24px',\n              borderRadius: '8px',\n              textDecoration: 'none',\n              fontWeight: '600'\n            }}\n          >\n            Go to BodyMap Home\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Demo \n      therapistName={therapist.business_name}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}