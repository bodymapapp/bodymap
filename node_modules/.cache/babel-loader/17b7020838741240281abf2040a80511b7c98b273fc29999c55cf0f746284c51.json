{"ast":null,"code":"var _jsxFileName = \"/Users/harshkumar/Library/CloudStorage/OneDrive-IBM/X HK HK Psnl/00 A Personal/01 Ideas/BodyMap/Product/bodymap-final/src/pages/ClientIntake.js\",\n  _s = $RefreshSig$();\n// src/pages/ClientIntake.js\n// Custom URL page - loads therapist, shows BodyMap, saves to Supabase\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { db } from '../lib/supabase';\nimport Demo from './Demo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ClientIntake() {\n  _s();\n  const {\n    customUrl\n  } = useParams();\n  const navigate = useNavigate();\n  const [therapist, setTherapist] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    loadTherapist();\n  }, [customUrl]);\n  const loadTherapist = async () => {\n    try {\n      setLoading(true);\n      const data = await db.getTherapistByUrl(customUrl);\n      setTherapist(data);\n      setError(null);\n    } catch (err) {\n      console.error('Error loading therapist:', err);\n      setError('Therapist not found. Please check the URL.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSubmit = async intakeData => {\n    try {\n      // Step 1: Create or get client\n      const client = await db.upsertClient(therapist.id, {\n        name: intakeData.clientName,\n        phone: intakeData.clientPhone,\n        email: intakeData.clientEmail || null\n      });\n\n      // Step 2: Create session with all intake data\n      await db.createSession({\n        therapist_id: therapist.id,\n        client_id: client.id,\n        front_focus: intakeData.frontFocus || [],\n        front_avoid: intakeData.frontAvoid || [],\n        back_focus: intakeData.backFocus || [],\n        back_avoid: intakeData.backAvoid || [],\n        pressure: intakeData.pressure || 3,\n        goal: intakeData.goal || 'relax',\n        table_temp: intakeData.tableTemp || 'warm',\n        room_temp: intakeData.roomTemp || 'comfortable',\n        music: intakeData.music || 'soft',\n        lighting: intakeData.lighting || 'dim',\n        conversation: intakeData.conversation || 'quiet',\n        draping: intakeData.draping || 'standard',\n        oil_pref: intakeData.oilPref || 'none',\n        med_flag: intakeData.medFlag || 'none',\n        completed: false\n      });\n\n      // Step 3: Redirect to thank you page\n      navigate('/thank-you', {\n        state: {\n          therapistName: therapist.business_name,\n          clientName: intakeData.clientName\n        }\n      });\n    } catch (err) {\n      console.error('Error saving intake:', err);\n      alert('There was an error saving your preferences. Please try again.');\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        fontFamily: 'system-ui, sans-serif',\n        background: '#F0EAD9'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '48px',\n            marginBottom: '16px'\n          },\n          children: \"\\uD83C\\uDF3F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '18px',\n            color: '#6B7280'\n          },\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        height: '100vh',\n        fontFamily: 'system-ui, sans-serif',\n        background: '#F0EAD9',\n        padding: '24px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          background: 'white',\n          padding: '40px',\n          borderRadius: '12px',\n          maxWidth: '400px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '48px',\n            marginBottom: '16px'\n          },\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            fontSize: '24px',\n            marginBottom: '16px',\n            color: '#1F2937'\n          },\n          children: \"Therapist Not Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '16px',\n            color: '#6B7280',\n            marginBottom: '24px'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://mybodymap.app\",\n          style: {\n            display: 'inline-block',\n            background: '#6B9E80',\n            color: 'white',\n            padding: '12px 24px',\n            borderRadius: '8px',\n            textDecoration: 'none',\n            fontWeight: '600'\n          },\n          children: \"Go to BodyMap Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Demo, {\n    therapistName: therapist.business_name,\n    onSubmit: handleSubmit\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n}\n_s(ClientIntake, \"Z40+zlYNOL5uCyTSH/+vMnCTEG4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ClientIntake;\nvar _c;\n$RefreshReg$(_c, \"ClientIntake\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","db","Demo","jsxDEV","_jsxDEV","ClientIntake","_s","customUrl","navigate","therapist","setTherapist","loading","setLoading","error","setError","loadTherapist","data","getTherapistByUrl","err","console","handleSubmit","intakeData","client","upsertClient","id","name","clientName","phone","clientPhone","email","clientEmail","createSession","therapist_id","client_id","front_focus","frontFocus","front_avoid","frontAvoid","back_focus","backFocus","back_avoid","backAvoid","pressure","goal","table_temp","tableTemp","room_temp","roomTemp","music","lighting","conversation","draping","oil_pref","oilPref","med_flag","medFlag","completed","state","therapistName","business_name","alert","style","display","justifyContent","alignItems","height","fontFamily","background","children","textAlign","fontSize","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","padding","borderRadius","maxWidth","href","textDecoration","fontWeight","onSubmit","_c","$RefreshReg$"],"sources":["/Users/harshkumar/Library/CloudStorage/OneDrive-IBM/X HK HK Psnl/00 A Personal/01 Ideas/BodyMap/Product/bodymap-final/src/pages/ClientIntake.js"],"sourcesContent":["// src/pages/ClientIntake.js\n// Custom URL page - loads therapist, shows BodyMap, saves to Supabase\n\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { db } from '../lib/supabase';\nimport Demo from './Demo';\n\nexport default function ClientIntake() {\n  const { customUrl } = useParams();\n  const navigate = useNavigate();\n  const [therapist, setTherapist] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    loadTherapist();\n  }, [customUrl]);\n\n  const loadTherapist = async () => {\n    try {\n      setLoading(true);\n      const data = await db.getTherapistByUrl(customUrl);\n      setTherapist(data);\n      setError(null);\n    } catch (err) {\n      console.error('Error loading therapist:', err);\n      setError('Therapist not found. Please check the URL.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (intakeData) => {\n    try {\n      // Step 1: Create or get client\n      const client = await db.upsertClient(therapist.id, {\n        name: intakeData.clientName,\n        phone: intakeData.clientPhone,\n        email: intakeData.clientEmail || null\n      });\n\n      // Step 2: Create session with all intake data\n      await db.createSession({\n        therapist_id: therapist.id,\n        client_id: client.id,\n        front_focus: intakeData.frontFocus || [],\n        front_avoid: intakeData.frontAvoid || [],\n        back_focus: intakeData.backFocus || [],\n        back_avoid: intakeData.backAvoid || [],\n        pressure: intakeData.pressure || 3,\n        goal: intakeData.goal || 'relax',\n        table_temp: intakeData.tableTemp || 'warm',\n        room_temp: intakeData.roomTemp || 'comfortable',\n        music: intakeData.music || 'soft',\n        lighting: intakeData.lighting || 'dim',\n        conversation: intakeData.conversation || 'quiet',\n        draping: intakeData.draping || 'standard',\n        oil_pref: intakeData.oilPref || 'none',\n        med_flag: intakeData.medFlag || 'none',\n        completed: false\n      });\n\n      // Step 3: Redirect to thank you page\n      navigate('/thank-you', { \n        state: { \n          therapistName: therapist.business_name,\n          clientName: intakeData.clientName \n        } \n      });\n    } catch (err) {\n      console.error('Error saving intake:', err);\n      alert('There was an error saving your preferences. Please try again.');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '100vh',\n        fontFamily: 'system-ui, sans-serif',\n        background: '#F0EAD9'\n      }}>\n        <div style={{ textAlign: 'center' }}>\n          <div style={{ fontSize: '48px', marginBottom: '16px' }}>üåø</div>\n          <div style={{ fontSize: '18px', color: '#6B7280' }}>Loading...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        height: '100vh',\n        fontFamily: 'system-ui, sans-serif',\n        background: '#F0EAD9',\n        padding: '24px'\n      }}>\n        <div style={{ \n          textAlign: 'center',\n          background: 'white',\n          padding: '40px',\n          borderRadius: '12px',\n          maxWidth: '400px'\n        }}>\n          <div style={{ fontSize: '48px', marginBottom: '16px' }}>‚ùå</div>\n          <h2 style={{ fontSize: '24px', marginBottom: '16px', color: '#1F2937' }}>\n            Therapist Not Found\n          </h2>\n          <p style={{ fontSize: '16px', color: '#6B7280', marginBottom: '24px' }}>\n            {error}\n          </p>\n          <a \n            href=\"https://mybodymap.app\"\n            style={{\n              display: 'inline-block',\n              background: '#6B9E80',\n              color: 'white',\n              padding: '12px 24px',\n              borderRadius: '8px',\n              textDecoration: 'none',\n              fontWeight: '600'\n            }}\n          >\n            Go to BodyMap Home\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Demo \n      therapistName={therapist.business_name}\n      onSubmit={handleSubmit}\n    />\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}